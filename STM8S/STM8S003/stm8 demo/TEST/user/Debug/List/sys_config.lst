###############################################################################
#
# IAR C/C++ Compiler V3.10.1.201 for STM8                 08/Oct/2019  17:55:37
# Copyright 2010-2017 IAR Systems AB.
# Standalone license - IAR Embedded Workbench for STMicroelectronics STM8
#
#    Source file  =  
#        E:\workspace\DataSheet\STM8S\STM8S003\stm8
#        demo\TEST\drive\sys_config.c
#    Command line =  
#        -f C:\Users\John\AppData\Local\Temp\EW4F59.tmp
#        ("E:\workspace\DataSheet\STM8S\STM8S003\stm8
#        demo\TEST\drive\sys_config.c" -e -Ol --no_cse --no_unroll --no_inline
#        --no_code_motion --no_tbaa --no_cross_call --debug --code_model small
#        --data_model small -o "E:\workspace\DataSheet\STM8S\STM8S003\stm8
#        demo\TEST\user\Debug\Obj" --dlib_config "D:\Program Files (x86)\IAR
#        Systems\Embedded Workbench 8.0\stm8\LIB\dlstm8ssf.h" -lcN
#        "E:\workspace\DataSheet\STM8S\STM8S003\stm8 demo\TEST\user\Debug\List"
#        -I "E:\workspace\DataSheet\STM8S\STM8S003\stm8
#        demo\TEST\user\..\lib\inc\" -I
#        "E:\workspace\DataSheet\STM8S\STM8S003\stm8
#        demo\TEST\user\..\lib\src\" -I
#        "E:\workspace\DataSheet\STM8S\STM8S003\stm8 demo\TEST\user\..\user\"
#        -I "E:\workspace\DataSheet\STM8S\STM8S003\stm8
#        demo\TEST\user\..\drive\" --vregs 16)
#    Locale       =  Chinese (Simplified)_CHN.936
#    List file    =  
#        E:\workspace\DataSheet\STM8S\STM8S003\stm8
#        demo\TEST\user\Debug\List\sys_config.lst
#    Object file  =  
#        E:\workspace\DataSheet\STM8S\STM8S003\stm8
#        demo\TEST\user\Debug\Obj\sys_config.o
#
###############################################################################

E:\workspace\DataSheet\STM8S\STM8S003\stm8 demo\TEST\drive\sys_config.c
      1          #include "sys_config.h"
      2          #include "stm8s.h"
      3          
      4          void UseHSI_AUTO(void)
      5          {
      6            CLK->SWCR&=0XFB;//SWIEN=0,禁止时钟切换中断
      7            CLK->SWCR|=0X02;//SWEN=1，使能切换机制
      8            CLK->SWCR=0XB4;//0XE1:HSI为主时钟；0XD2:LSI为主时钟(仅LSI_EN=1时)；0XB4：HSE为主时钟；
      9            CLK->CKDIVR=0X00;//分频系数
     10          }
     11          
     12          void UseHSI_HAND(void)//暂时测试失败
     13          {
     14            CLK->SWCR&=0XFB;//SWIEN=0,禁止时钟切换中断
     15            CLK->CKDIVR=0;//分频系数
     16            CLK->SWCR=0XB4;//0XE1:HSI为主时钟；0XD2:LSI为主时钟(仅LSI_EN=1时)；0XB4：HSE为主时钟；
     17            while(!(CLK->SWCR&0X07));
     18            CLK->SWCR|=0X02;//SWEN=1，使能切换机制
     19          }
     20          
     21          

   Section sizes:

   Bytes  Function/Label
   -----  --------------
      17  UseHSI_AUTO
      26  UseHSI_HAND

 
 43 bytes in section .near_func.text
 
 43 bytes of CODE memory

Errors: none
Warnings: none
